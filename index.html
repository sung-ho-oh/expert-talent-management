<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root { --p-color: #0056b3; }
    body { font-family: sans-serif; margin: 0; padding-top: 60px; background: #f4f6f8; }
    header { background: var(--p-color); color: #fff; height: 60px; position: fixed; top: 0; width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; box-sizing: border-box; z-index: 1000; }
    .nav-btn { background: rgba(255,255,255,0.2); border: none; color: #fff; padding: 5px 10px; border-radius: 4px; display: none; }
    .nav-btn.v { display: block; }
    .container { max-width: 600px; margin: auto; background: #fff; min-height: 100vh; padding: 20px; }
    .card { border: 1px solid #eee; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; cursor: pointer; border-radius: 8px; }
    .thumb { width: 50px; height: 50px; border-radius: 50%; margin-right: 15px; object-fit: cover; }
  </style>
</head>
<body>
  <header>
    <strong>ì¸ì¬ ì •ë³´ ì‹œìŠ¤í…œ</strong>
    <div>
      <button id="hBtn" class="nav-btn" onclick="go('h')">í™ˆ</button>
      <button id="lBtn" class="nav-btn" onclick="load()">ëª©ë¡</button>
    </div>
  </header>
  <div class="container">
    <div id="p-login" class="page">
      <h2>ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</h2>
      <input type="password" id="pw" style="width:100%; padding:10px;"><br><br>
      <button onclick="auth()" style="width:100%; padding:10px; background: #0056b3; color:#fff; border:none;">ì ‘ì†</button>
    </div>
    <div id="p-h" class="page" style="display:none;">
      <button onclick="load()" style="width:100%; padding:20px;">ì •ë³´ ì¡°íšŒí•˜ê¸°</button>
    </div>
    <div id="p-l" class="page" style="display:none;">
      <h3>ì „ë¬¸ê°€ ëª©ë¡</h3>
      <div id="list"></div>
    </div>
    <div id="p-d" class="page" style="display:none;">
      <div id="det"></div>
    </div>
  </div>
  <script>
    const PW = "YOUR_APP_PASSWORD";
    function auth() { if(document.getElementById('pw').value === PW) go('h'); else alert('ì˜¤ë‹µ'); }
    function go(p) {
      document.querySelectorAll('.page').forEach(el => el.style.display = 'none');
      document.getElementById('p-'+p).style.display = 'block';
      document.getElementById('hBtn').classList.toggle('v', p!=='login' && p!=='h');
      document.getElementById('lBtn').classList.toggle('v', p==='d');
    }
    function load() {
      google.script.run.withSuccessHandler(data => {
        let h = '';
        data.forEach(r => {
          let img = r[r.length-1] ? `<img src="${r[r.length-1]}" class="thumb">` : 'ğŸ‘¤';
          h += `<div class="card" onclick="det('${r[1]}', '${r[r.length-1]}')">${img} <div>${r[1]}</div></div>`;
        });
        document.getElementById('list').innerHTML = h;
        go('l');
      }).getData();
    }
    function det(n, i) {
      document.getElementById('det').innerHTML = `<h3>${n}</h3><img src="${i}" style="width:100%">`;
      go('d');
    }
  </script>
</body>
</html>
